!function(){"use strict";function e(e){var t=e.parentNode.parentNode.parentNode;t.querySelector(".form-control").value=e.files[0].name}function t(){document.querySelector("#targetForm").setAttribute("style","display: none"),document.querySelector("#targetHelp").setAttribute("style","display: none"),document.querySelector("#reloader").setAttribute("style","display: block"),document.querySelector("#preview").setAttribute("style","display: block")}function n(e){r(),t(),Array.prototype.forEach.call(document.querySelectorAll("input[name=position]"),function(e){e.removeAttribute("disabled")}),watermark([e]).image(function(e){return e}).then(function(e){document.getElementById("preview").appendChild(e)})}function r(){document.querySelectorAll("input[name=watermene]").forEach(function(e){e.removeAttribute("disabled")})}function o(e){var t,n,r=document.getElementById("preview"),o=r.querySelector("img"),u=document.querySelector("input[name=position]:checked").value;l||(l=o),"custom"===u&&(t=document.querySelector("input[name=horizontal]").value,n=document.querySelector("input[name=vertical]").value),watermark([l,e]).image(watermark.image[u](.8,t,n)).then(function(e){r.replaceChild(e,o)})}function u(){var e=document.querySelector("input[name='watermene']:checked");return!!e.value}var l;document.addEventListener("DOMContentLoaded",function(){document.addEventListener("change",function(t){var r=t.target;if("file"===r.type&&(e(r),"target"===r.id?n(r.files[0]):o(r.files[0])),"radio"===r.type&&u()){var l=document.getElementById("range");l.style.display="custom"===r.value?"block":"none",o(document.querySelector("input[name='watermene']:checked").value)}"range"===r.type&&u()&&(document.getElementById("horizontal-span").innerHTML=document.querySelector("input[name='horizontal']").value,document.getElementById("vertical-span").innerHTML=document.querySelector("input[name='vertical']").value,o(document.querySelector("input[name='watermene']:checked").value))});var t=document.getElementById("uploadForm");t.addEventListener("submit",function(e){var t=document.getElementById("progress"),n=t.querySelector(".progress-bar"),r=document.getElementById("complete"),o=document.getElementById("error");t.style.visibility="visible",upload(function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;n.style.width=t+"%"}},function(){r.style.display="block",o.style.display="none"},function(){o.style.display="block",r.style.display="none"}),e.preventDefault()})})}();
